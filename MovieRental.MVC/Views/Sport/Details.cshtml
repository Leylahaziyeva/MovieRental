@model SportViewModel

@{
    ViewData["Title"] = Model.Name ?? localizer.GetValue("SportDetails");
}

@if (!string.IsNullOrEmpty(Model.CoverImageUrl))
{
    <div class="cover-pic">
        <img src="@Model.CoverImageUrl" class="img-fluid" alt="@Model.Name">
    </div>
}

<div class="container mb-4 pb-2 list-bp">
    <div class="row">
        <div class="col-xl-12 col-lg-12">
            <!-- Header -->
            <div class="bg-white info-header sheader shadow-sm rounded mb-4">
                <div class="d-flex align-items-center justify-content-between py-3 px-4 border-bottom">
                    <div>
                        <h3 class="text-gray-900 mb-0 mt-0 font-weight-bold">@Model.Name</h3>
                        <p class="mb-0">
                            <small class="text-muted">
                                <i class="fas fa-map-marker-alt fa-fw fa-sm mr-1"></i> @Model.Location
                            </small>
                        </p>
                    </div>
                    <div>
                        <a href="#" class="d-sm-inline-block btn btn-primary shadow-sm-sm">
                            <i class="fas fa-share-alt"></i>
                        </a>
                        <a href="#" class="d-sm-inline-block btn btn-danger shadow-sm-sm">
                            @localizer.GetValue("AddToWatchlist") <i class="fas fa-plus fa-sm ml-1"></i>
                        </a>
                    </div>
                </div>
                <div class="d-flex align-items-center justify-content-between py-3 px-4">
                    <div>
                        <p class="mb-0 text-gray-900">
                            <i class="fas fa-calendar-alt fa-sm fa-fw mr-1"></i>
                            @Model.FormattedDate @localizer.GetValue("At") @Model.FormattedTime
                        </p>
                    </div>
                    <div>
                        <p class="mb-0 text-gray-600">
                            @if (!string.IsNullOrEmpty(Model.Categories))
                            {
                                <i class="fas fa-tags fa-sm fa-fw mr-1"></i>
                                <text>@Model.Categories</text>
                            }
                            @if (!string.IsNullOrEmpty(Model.AgeRestriction))
                            {
                                <text> | @Model.AgeRestriction</text>
                            }
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Players Sidebar -->
        <div class="col-xl-3 col-lg-3">
            <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Players")</h1>

                @if (Model.Players != null && Model.Players.Any())
                {
                    @foreach (var player in Model.Players)
                    {
                        <div class="artist-list mb-3">
                            <a asp-controller="Person" asp-action="Details" asp-route-id="@player.Id" class="d-flex align-items-center">
                                <div class="dropdown-list-image mr-3">
                                    <img class="rounded-circle" src="~/img/@player.ProfileImageUrl" alt="@player.Name">
                                    <div class="status-indicator bg-success"></div>
                                </div>
                                <div class="font-weight-bold">
                                    <div class="text-truncate">@player.Name</div>
                                    <div class="small text-gray-600">@localizer.GetValue("Player")</div>
                                </div>
                            </a>
                        </div>
                    }
                }
                else
                {
                    <p class="text-muted small">@localizer.GetValue("NoPlayersAvailable")</p>
                }
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-xl-6 col-lg-6">
            <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                <ul class="nav nav-tabs" id="sportTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="summary-tab" data-toggle="tab" href="#summary"
                           role="tab" aria-controls="summary" aria-selected="true">
                            @localizer.GetValue("Summary")
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="datetime-tab" data-toggle="tab" href="#datetime"
                           role="tab" aria-controls="datetime" aria-selected="false">
                            @localizer.GetValue("DateAndTime")
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="faq-tab" data-toggle="tab" href="#faq"
                           role="tab" aria-controls="faq" aria-selected="false">
                            @localizer.GetValue("FAQ")
                        </a>
                    </li>
                </ul>

                <div class="tab-content" id="sportTabContent">
                    <!-- Summary Tab -->
                    <div class="tab-pane fade show active" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                        <h6 class="mt-3 mb-3">@Model.Name</h6>

                        @if (!string.IsNullOrEmpty(Model.Description))
                        {
                            @Html.Raw(Model.Description.Replace("\n", "<br>"))
                        }
                        else
                        {
                            <p class="text-muted">@localizer.GetValue("NoDescriptionAvailable")</p>
                        }

                        @if (Model.Price.HasValue)
                        {
                            <div class="mt-4">
                                <h6>@localizer.GetValue("TicketPrice")</h6>
                                <p class="text-primary font-weight-bold">@Model.FormattedPrice</p>
                            </div>
                        }
                    </div>

                    <!-- Date and Time Tab -->
                    <div class="tab-pane fade" id="datetime" role="tabpanel" aria-labelledby="datetime-tab">
                        <h5 class="mt-3 mb-3">@Model.FormattedDate</h5>
                        <p><strong>@localizer.GetValue("Time"):</strong> @Model.FormattedTime</p>

                        @if (Model.IsUpcoming)
                        {
                            <div class="alert alert-info">
                                <i class="fas fa-clock mr-2"></i>
                                @localizer.GetValue("EventStartsIn") @Model.DaysUntilEvent @localizer.GetValue("Days")
                            </div>
                        }
                        else
                        {
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                @localizer.GetValue("EventHasPassed")
                            </div>
                        }

                        @if (!string.IsNullOrEmpty(Model.Venue))
                        {
                            <p class="mt-3">
                                <strong>@localizer.GetValue("Venue"):</strong><br>
                                @Model.Venue
                            </p>
                        }
                    </div>

                    <!-- FAQ Tab -->
                    <div class="tab-pane fade" id="faq" role="tabpanel" aria-labelledby="faq-tab">
                        <div class="accordion mt-3" id="faqAccordion">
                            <div class="card">
                                <div class="card-header" id="faqHeading1">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse"
                                                data-target="#faqCollapse1" aria-expanded="true" aria-controls="faqCollapse1">
                                            @localizer.GetValue("HowToBuyTickets")
                                        </button>
                                    </h2>
                                </div>
                                <div id="faqCollapse1" class="collapse show" aria-labelledby="faqHeading1" data-parent="#faqAccordion">
                                    <div class="card-body">
                                        @localizer.GetValue("TicketPurchaseInstructions")
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="faqHeading2">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                                data-target="#faqCollapse2" aria-expanded="false" aria-controls="faqCollapse2">
                                            @localizer.GetValue("RefundPolicy")
                                        </button>
                                    </h2>
                                </div>
                                <div id="faqCollapse2" class="collapse" aria-labelledby="faqHeading2" data-parent="#faqAccordion">
                                    <div class="card-body">
                                        @localizer.GetValue("RefundPolicyDescription")
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="col-xl-3 col-lg-3">
            <!-- Location Info -->
            <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Location")</h1>

                @if (!string.IsNullOrEmpty(Model.Venue))
                {
                    <p>
                        <b>@Model.Venue</b><br>
                        @Model.Location
                    </p>
                }
                else
                {
                    <p>@Model.Location</p>
                }

                @if (!string.IsNullOrEmpty(Model.ContactPhone))
                {
                    <p class="text-gray-600">
                        <i class="fas fa-mobile fa-fw"></i> @Model.ContactPhone
                    </p>
                }

                @if (!string.IsNullOrEmpty(Model.ContactEmail))
                {
                    <p class="mb-0 text-gray-600">
                        <i class="fas fa-envelope-open fa-fw"></i>
                        <a href="mailto:@Model.ContactEmail">@Model.ContactEmail</a>
                    </p>
                }
            </div>

            <!-- Map -->
            @if (!string.IsNullOrEmpty(Model.GoogleMapsUrl))
            {
                <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                    <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Map")</h1>
                    <iframe src="@Model.GoogleMapsUrl" width="100" height="185" frameborder="0"
                            style="border:0;" allowfullscreen=""></iframe>
                </div>
            }
        </div>
    </div>
</div>