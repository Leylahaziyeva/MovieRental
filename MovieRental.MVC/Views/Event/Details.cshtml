@model EventViewModel

@{
    ViewData["Title"] = Model.Name ?? localizer.GetValue("EventDetails");
}

@if (!string.IsNullOrEmpty(Model.CoverImageUrl))
{
    <div class="cover-pic">
        <img src="~/img/@Model.CoverImageUrl" class="img-fluid" alt="@Model.Name">
    </div>
}

<div class="container mb-4 pb-2 list-bp">
    <div class="row">
        <div class="col-xl-12 col-lg-12">
            <div class="bg-white info-header eheader shadow-sm rounded mb-4">
                <div class="d-flex align-items-center justify-content-between py-3 px-4 border-bottom">
                    <div>
                        <h3 class="text-gray-900 mb-0 mt-0 font-weight-bold">@Model.Name</h3>
                        <p class="mb-0">
                            <small class="text-muted">
                                <i class="fas fa-map-marker-alt fa-fw fa-sm mr-1"></i> @Model.Location
                            </small>
                        </p>
                    </div>
                    <div>
                        <a href="#" class="d-sm-inline-block btn btn-primary shadow-sm-sm">
                            <i class="fas fa-share-alt"></i>
                        </a>
                        <a href="#" class="d-sm-inline-block btn btn-danger shadow-sm-sm">
                            @localizer.GetValue("AddToWatchlist") <i class="fas fa-plus fa-sm ml-1"></i>
                        </a>
                    </div>
                </div>
                <div class="d-flex align-items-center justify-content-between py-3 px-4">
                    <div>
                        <p class="mb-0 text-gray-900">
                            <i class="fas fa-calendar-alt fa-sm fa-fw mr-1"></i>
                            @Model.FormattedDate @localizer.GetValue("at") @Model.FormattedTime
                        </p>
                    </div>
                    <div>
                        <p class="mb-0 text-gray-600">
                            @if (!string.IsNullOrEmpty(Model.Categories))
                            {
                                <i class="fas fa-film fa-sm fa-fw mr-1"></i>
                                <span>@Model.Categories</span>
                            }
                            @if (!string.IsNullOrEmpty(Model.Languages))
                            {
                                <span>| @Model.Languages</span>
                            }
                            @if (!string.IsNullOrEmpty(Model.AgeRestriction))
                            {
                                <span>| @Model.AgeRestriction</span>
                            }
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Artists Sidebar -->
        <div class="col-xl-3 col-lg-3">
            @if (Model.Artists != null && Model.Artists.Any())
            {
                <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                    <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Artists")</h1>
                    @foreach (var artist in Model.Artists)
                    {
                        <div class="artist-list @(artist != Model.Artists.Last() ? "mb-3" : "")">
                            <a class="d-flex align-items-center" asp-controller="Person" asp-action="Details" asp-route-id="@artist.Id">
                                <div class="dropdown-list-image mr-3">
                                    <img class="rounded-circle" src="~/img/@artist.ProfileImageUrl" alt="@artist.Name">
                                    <div class="status-indicator bg-success"></div>
                                </div>
                                <div class="font-weight-bold">
                                    <div class="text-truncate">@artist.Name</div>
                                    <div class="small text-gray-600">
                                        @if (!string.IsNullOrEmpty(artist.KnownFor))
                                        {
                                            @artist.KnownFor
                                        }
                                        else if (!string.IsNullOrEmpty(artist.PersonTypeDisplay))
                                        {
                                            @artist.PersonTypeDisplay
                                        }
                                        else
                                        {
                                            @localizer.GetValue(artist.PersonType.ToString())
                                        }
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                </div>
            }
        </div>

        <!-- Main Content -->
        <div class="col-xl-6 col-lg-6">
            <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
                            @localizer.GetValue("Summary")
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
                            @localizer.GetValue("DateAndTime")
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">
                            FAQ
                        </a>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <!-- Summary Tab -->
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <h6 class="mt-3 mb-3">@Model.Name</h6>
                        <div>
                            @Html.Raw(Model.Description)
                        </div>

                        @if (Model.Price.HasValue && Model.Price > 0)
                        {
                            <div class="mt-3">
                                <h6 class="text-success">
                                    @localizer.GetValue("Price"): @Model.FormattedPrice
                                </h6>
                            </div>
                        }
                        else
                        {
                            <div class="mt-3">
                                <h6 class="text-success">@localizer.GetValue("FreeEvent")</h6>
                            </div>
                        }

                        @if (Model.IsUpcoming)
                        {
                            <p class="mt-3 text-info">
                                <i class="fas fa-clock fa-fw"></i>
                                @Model.DaysUntilEvent @localizer.GetValue("DaysUntilEvent")
                            </p>
                        }
                    </div>

                    <!-- Date and Time Tab -->
                    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                        <h5 class="mt-3 mb-3">@Model.FormattedDate</h5>
                        <p><strong>@localizer.GetValue("Time"):</strong> @Model.FormattedTime</p>
                        <p><strong>@localizer.GetValue("Location"):</strong> @Model.Location</p>
                        @if (!string.IsNullOrEmpty(Model.Venue))
                        {
                            <p><strong>@localizer.GetValue("Venue"):</strong> @Model.Venue</p>
                        }
                        @if (!string.IsNullOrEmpty(Model.Description))
                        {
                            <div class="mt-3">
                                @Html.Raw(Model.Description)
                            </div>
                        }
                    </div>

                    <!-- FAQ Tab -->
                    <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            @localizer.GetValue("WhatToExpect")
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                                    <div class="card-body">
                                        @if (!string.IsNullOrEmpty(Model.Description))
                                        {
                                            @Html.Raw(Model.Description)
                                        }
                                        else
                                        {
                                            <p>@localizer.GetValue("NoAdditionalInfo")</p>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" id="headingTwo">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            @localizer.GetValue("PriceTicketInfo")
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                    <div class="card-body">
                                        @if (Model.Price.HasValue && Model.Price > 0)
                                        {
                                            <p><strong>@localizer.GetValue("Price"):</strong> @Model.FormattedPrice</p>
                                            <p>@localizer.GetValue("TicketPurchaseInfo")</p>
                                        }
                                        else
                                        {
                                            <p><strong>@localizer.GetValue("FreeEvent")</strong></p>
                                            <p>@localizer.GetValue("FreeEventInfo")</p>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" id="headingThree">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                            @localizer.GetValue("LocationParking")
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <p><strong>@localizer.GetValue("Location"):</strong> @Model.Location</p>
                                        @if (!string.IsNullOrEmpty(Model.Venue))
                                        {
                                            <p><strong>@localizer.GetValue("Venue"):</strong> @Model.Venue</p>
                                        }
                                        <p>@localizer.GetValue("ParkingInfo")</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact & Map Sidebar -->
        <div class="col-xl-3 col-lg-3">
            <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Location")</h1>
                @if (!string.IsNullOrEmpty(Model.Venue))
                {
                    <p><b>@Model.Venue</b><br></p>
                }
                <p>@Model.Location</p>

                @if (!string.IsNullOrEmpty(Model.ContactPhone))
                {
                    <p class="text-gray-600">
                        <i class="fas fa-mobile fa-fw"></i> @Model.ContactPhone
                    </p>
                }

                @if (!string.IsNullOrEmpty(Model.ContactEmail))
                {
                    <p class="mb-0 text-gray-600">
                        <i class="fas fa-envelope-open fa-fw"></i>
                        <a href="mailto:@Model.ContactEmail">@Model.ContactEmail</a>
                    </p>
                }
            </div>

            @if (!string.IsNullOrEmpty(Model.GoogleMapsUrl))
            {
                <div class="bg-white p-3 widget shadow-sm rounded mb-4">
                    <h1 class="h6 mb-3 mt-0 font-weight-bold text-gray-900">@localizer.GetValue("Map")</h1>
                    <iframe src="~/img/@Model.GoogleMapsUrl" style="width: 100%; height: 185px; border: 0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            }
        </div>
    </div>
</div>